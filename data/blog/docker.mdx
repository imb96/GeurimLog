---
title: Docker í™˜ê²½ êµ¬ì„± ê°€ì´ë“œ
date: '2025-01-11'
tags: ['docker']
draft: false
summary: Dockerë¡œ í”„ë¡ íŠ¸(Next.js), ë°±ì—”ë“œ(Django) ê°œë°œ í™˜ê²½ êµ¬ì„±í•˜ê¸°
---

> í•´ë‹¹ê¸€ì€ í”„ë¡ íŠ¸ì—”ë“œ (Next.js), ë°±ì—”ë“œ (Django)ë¥¼ ì˜ˆì‹œë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

# Docker í™˜ê²½ êµ¬ì„± ê°€ì´ë“œ ğŸ³

### Dockerë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ì¥ì 

DockerëŠ” í˜„ëŒ€ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ í™˜ê²½ì—ì„œ í•„ìˆ˜ ë„êµ¬ë¡œ ìë¦¬ ì¡ì•˜ìŠµë‹ˆë‹¤. Dockerë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì´ì ì„ ëˆ„ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. í™˜ê²½ ì¼ê´€ì„± ë³´ì¥

   - ê°œë°œ, í…ŒìŠ¤íŠ¸, ìš´ì˜ í™˜ê²½ì´ ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.
   - â€œë¡œì»¬ì—ì„œëŠ” ì˜ ë˜ëŠ”ë° ì„œë²„ì—ì„œ ì•ˆ ë¼ìš”.â€ ê°™ì€ ë¬¸ì œê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.

2. ì˜ì¡´ì„± ê´€ë¦¬
   - ê° ì»¨í…Œì´ë„ˆëŠ” í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì¢…ì†ì„±ì„ í¬í•¨í•˜ë¯€ë¡œ ì¶©ëŒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - ë‹¤ì–‘í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„œë¡œ ê²©ë¦¬í•˜ì—¬ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. í™•ì¥ì„± ë° ìœ ì—°ì„±
   - ì„œë¹„ìŠ¤ ê¸°ë°˜ ì•„í‚¤í…ì²˜(Microservices)ë¥¼ ì†ì‰½ê²Œ êµ¬ì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - í•„ìš”í•  ë•Œ ì»¨í…Œì´ë„ˆë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•´ ìœ ì—°í•˜ê²Œ í™•ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.
4. ì†ì‰¬ìš´ ë°°í¬
   - Docker ì´ë¯¸ì§€ë¥¼ í†µí•´ ì¼ê´€ëœ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
   - CI/CDì™€ í†µí•©í•˜ë©´ ìë™í™”ëœ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. ìì› íš¨ìœ¨ì„±
   - VM(ê°€ìƒ ë¨¸ì‹ )ë³´ë‹¤ ê²½ëŸ‰ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ë” ì ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
   - ì»¨í…Œì´ë„ˆëŠ” OS ì»¤ë„ì„ ê³µìœ í•˜ë¯€ë¡œ ë¹ ë¥´ê²Œ ì‹œì‘í•˜ê³  ì¢…ë£Œë©ë‹ˆë‹¤.
6. í˜‘ì—… íš¨ìœ¨ì„±
   - ëª¨ë“  íŒ€ì›ì´ ë™ì¼í•œ Docker ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ í˜‘ì—…ì´ ê°„í¸í•´ì§‘ë‹ˆë‹¤.
   - ìƒˆë¡œìš´ íŒ€ì›ì´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ë³µì¡í•œ í™˜ê²½ ì„¤ì •ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.

### ì‚¬ì „ ì¤€ë¹„ì‚¬í•­

ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒì´ ì¤€ë¹„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤:

- Docker Desktop ì„¤ì¹˜
- Git ì„¤ì¹˜
- í”„ë¡œì íŠ¸ ì½”ë“œ ì¤€ë¹„

### í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •

```shell
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬
your-project/
â”œâ”€â”€ frontend/
â”œâ”€â”€ backend/
â””â”€â”€ docker-compose.yml
```

### Dockerfile ìƒì„± ğŸ› ï¸

ë°±ì—”ë“œ Dockerfile

```shell
# backend/Dockerfile ìƒì„±
cd backend
touch Dockerfile
```

Dockerfile ë‚´ìš©:

```Dockerfile
FROM python:3.9
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

### í”„ë¡ íŠ¸ì—”ë“œ Dockerfile

```shell
# frontend/Dockerfile ìƒì„±
cd ../frontend
touch Dockerfile
```

Dockerfile ë‚´ìš©:

```dockerfile
FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
ENV NODE_ENV=development
CMD ["npm", "run", "dev"]
```

### docker-compose.yml ì‘ì„±

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— docker-compose.yml íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤:

```shell
cd ..
touch docker-compose.yml
```

docker-compose.yml ë‚´ìš©:

```yaml
version: '3'

services:
  db:
    image: mysql:8.0
    restart: always
    environment:
      MYSQL_DATABASE: 'your_db'
      MYSQL_USER: 'your_user'
      MYSQL_PASSWORD: 'your_password'
      MYSQL_ROOT_PASSWORD: 'your_root_password'
    ports:
      - '3306:3306'
    volumes:
      - mysql_data:/var/lib/mysql
    healthcheck:
      test: ['CMD', 'mysqladmin', 'ping', '-h', 'localhost']
      timeout: 5s
      retries: 5

  backend:
    build: ./backend
    ports:
      - '8000:8000'
    volumes:
      - ./backend:/app
    environment:
      - DEBUG=1
      - DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,backend
      - MYSQL_HOST=db
      - MYSQL_DATABASE=your_db
      - MYSQL_USER=your_user
      - MYSQL_PASSWORD=your_password
    depends_on:
      db:
        condition: service_healthy

  frontend:
    build: ./frontend
    ports:
      - '3000:3000'
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
    depends_on:
      - backend

volumes:
  mysql_data:
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •

í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```shell
# frontend/src/config/index.ts ìƒì„±
mkdir -p frontend/src/config
touch frontend/src/config/index.ts
```

index.ts ë‚´ìš©:

```ts
export const BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://backend:8000'
```

### ë°±ì—”ë“œ ì„¤ì • ìˆ˜ì •

Djangoì˜ settings.pyì— ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```python
ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    'backend',
]

CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",
    "http://frontend:3000",
]

CORS_ALLOW_CREDENTIALS = True
```

### ì‹¤í–‰ ë° ê´€ë¦¬

docker ì„œë¹„ìŠ¤ ì‹œì‘

```shell
# ì´ë¯¸ì§€ ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ì‹œì‘
docker-compose up --build

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
docker-compose up -d --build
```

### ì„œë¹„ìŠ¤ ì¢…ë£Œ

```shell
# ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ ì¢…ë£Œ
docker-compose down

# ë³¼ë¥¨ê¹Œì§€ ì‚­ì œ
docker-compose down -v
```

### ë¡œê·¸ í™•ì¸

```shell
# ì „ì²´ ë¡œê·¸
docker-compose logs

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs backend
docker-compose logs frontend
```
